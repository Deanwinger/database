# 第四章 schema与数据类型优化

## 4.1 选择优化的数据类型
- 更小的通常更好
- 简单就好
- 尽量避免NULL

### 4.1.1 整数类型
- tinyint, smallint, mediumint, int, bigint分别使用8,16,24,32,,64为存储空间;
- mysql 可以为整数类型制定宽度, 例如int(11), int(20), 对大多数应用没有意义, 只不过规定了mysql的交互工具用来显示字符的个数;

### 4.1.2 实数类型
- float 4字节, double八字节;
- decimal 用于存储精确的小数,MySQL5.0和更高的版本中,最高允许65个数字, 将数字打包保存到一个二进制字符串中,例如,decimal(18, 9)小数点两边个存储9个数字, 一共9字节,小数点前后各占4个字节, 小数点本身占1个字节;

### 4.1.3 字符串类型
1. varchar和char, 很难精确地解释这些值是怎么样存储在磁盘和内存中的, 因为这跟存储引擎的具体实现有关, 下面的描述假设使用的存储引擎是InnoDB或者MyISAM;

(1) varchar:
- varchar 比char更节省空间, 除非MySQL表使用row_format=fixed;
- varchar 需要使用1或者2个额外字节记录字符串长度: 如果列的最大长度<=255, 则使用一字节,否则使用两字节,例如:
~~~
假设采用latin1字符集;
varchar(10)需要11个字节的存储空间;
varchar(1000)需要1002个字节;
~~~
- 适用场景:
~~~
a. 字符串列的最大长度比平均长度大很多;
b. 列的更新很少, 所以碎片不成问题;
c. 使用了像utf-8这样复杂的字符集;
~~~

(2). char
- 存储char时会删除所有的末尾空格;
- 适用场景:
~~~
a. 适合存储很短的字符串, 或者长度接近的, 例如md5值;
b. 经常变更的数据;
c. 非常短的列
~~~

2.BLOB和TEXT类型

######P153 to be continued